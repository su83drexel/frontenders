<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FlopFinder Genres</title>
  <link rel="stylesheet" href="styles/main.css" />
  <style>
  .image-cell img {
    width: 150px;          /* fixed width */
    height: 150px;         /* fixed height */
    object-fit: cover;     /* keeps proportions while cropping edges */
    border-radius: 8px;    /* optional rounding */
  }
  table
  {
  margin: 40px auto;
  border-collapse: separate;
  border-spacing: 100px;
  }
  </style>
</head>
<body>
  <div id="dummyAct" class="theme-action" style="visibility: hidden"></div>
  <div id="dummyAdv" class="theme-adventure" style="visibility: hidden"></div>
  <div id="dummyAni" class="theme-animation" style="visibility: hidden"></div>
  <div id="dummyCom" class="theme-comedy" style="visibility: hidden"></div>
  <div id="dummyCri" class="theme-crime" style="visibility: hidden"></div>
  <div id="dummyDoc" class="theme-documentary" style="visibility: hidden"></div>
  <div id="dummyDra" class="theme-drama" style="visibility: hidden"></div>
  <div id="dummyFam" class="theme-family" style="visibility: hidden"></div>
  <div id="dummyFan" class="theme-fantasy" style="visibility: hidden"></div>
  <div id="dummyHis" class="theme-history" style="visibility: hidden"></div>
  <div id="dummyHor" class="theme-horror" style="visibility: hidden"></div>
  <div id="dummyMus" class="theme-music" style="visibility: hidden"></div>
  <div id="dummyMys" class="theme-mystery" style="visibility: hidden"></div>
  <div id="dummyRom" class="theme-romance" style="visibility: hidden"></div>
  <div id="dummySF" class="theme-sciencefiction" style="visibility: hidden"></div>
  <div id="dummyThr" class="theme-thriller" style="visibility: hidden"></div>
  <div id="dummyTV" class="theme-tvmovie" style="visibility: hidden"></div>
  <div id="dummyWar" class="theme-war" style="visibility: hidden"></div>
  <div id="dummyWes" class="theme-western" style="visibility: hidden"></div>

  <div id="site-header"></div>

  <main class="container">
    <section class="hero">
      <h1>Select Your Preferences</h1>
      <p>Choose genres and submit. We'll use these for recommendations.</p>
    </section>

    <section class="section">
      <form class="card" id="genre-form" aria-labelledby="genre-title">
        <h2 id="genre-title" style="margin-top:0;">Genres</h2>

        <div class="grid">
          <table id = "genreTable">

          </table>
        </div>

        <div class="mt-24">
          <button class="btn btn-primary" type="submit">Apply</button>
        </div>
      </form>
    </section>
  </main>
  

  <div id="site-footer"></div>


  <script src="/js/layout.js" defer></script>
  <script src="/js/app.js" defer></script>

  <script>
    const images = [
      { src: "images/Adventure.png", alt: "Adventure", color: ".theme-adventure", divC: "dummyAdv" },
      { src: "images/animation.png", alt: "Animation", color: ".theme-animation", divC: "dummyAni"  },
      { src: "images/Comedy.png", alt: "Comedy", color: ".theme-comedy", divC: "dummyCom"  },
      { src: "images/Crime.png", alt: "Crime", color: ".theme-crime", divC: "dummyCri"  },
      { src: "images/detective.png", alt: "Mystery", color: ".theme-mystery", divC: "dummyMys"  },
      { src: "images/Documentary.png", alt: "Documentary", color: ".theme-documentary", divC: "dummyDoc"  },
      { src: "images/drama.png", alt: "Drama", color: ".theme-drama", divC: "dummyDra"  },
      { src: "images/Family.png", alt: "Family", color: ".theme-family", divC: "dummyFam"  },
      { src: "images/Fantasy.png", alt: "Fantasy", color: ".theme-fantasy", divC: "dummyFan"  },
      { src: "images/History.png", alt: "History", color: ".theme-history", divC: "dummyHis"  },
      { src: "images/music.png", alt: "Music", color: ".theme-music", divC: "dummyMus"  },
      { src: "images/romance.png", alt: "Romance", color: ".theme-romance", divC: "dummyRom"  },
      { src: "images/ScienceFiction.png", alt: "ScienceFiction", color: ".theme-sciencefiction", divC: "dummySF"  },
      { src: "images/Thriller.png", alt: "Thriller", color: ".theme-thriller", divC: "dummyThr"  },
      { src: "images/TVMovie.png", alt: "TVMovie", color: ".theme-tvmovie", divC: "dummyTV"  },
      { src: "images/war.png", alt: "War", color: ".theme-war", divC: "dummyWar"  }
    ];

    

    document.addEventListener("DOMContentLoaded", () => {

      const element = document.querySelector('.theme-action');

      if(element == null)
      {
        console.log("brother whaaat");
      }

      const table = document.getElementById("genreTable");
      const columnsPerRow = 3;
      let row;

    
      images.forEach((img, i) => {//loop through and create cells for each image
        if (i % columnsPerRow === 0) {
          row = document.createElement("tr");
          table.appendChild(row);
        }

        const cell = createCellWithTheme(img,"--secondary");
        cell.classList.add("image-cell");
  
        
        row.appendChild(cell);

      });

    const buttons = document.querySelectorAll("button");

    buttons.forEach((button) => {
        button.addEventListener("click", () => {
          let value = button.textContent;
          localStorage.setItem("selectedGenre", value);
          window.open('genres.html', '_blank');
        });
      });
    });

    
    function createCellWithTheme(img, variableName) 
    {
      const cell = document.createElement("td");

      
      //console.log(themeClass.divC);
      const element = document.getElementById(img.divC);


      const styles = getComputedStyle(element);

      const primary = styles.getPropertyValue('--primary').trim();
      const secondary = styles.getPropertyPriority('--secondary').trim();


      /*
      so for some reason, and i've been pulling my hair out a little bit for this,
      when i try to access the '--primary' variable of the CSS class, it works.

      but when i try accessing "--secondary", it doesnt. It's very bizarre that 
      i can access a class, and also access the first variable of that class, but then
      not the second or third or 4th variable. I hardcoded it all down below because
      i couldnt think of a better solution, so im very sorry for all the if statements.
      
      */
      //console.log('Primary:', secondary); 

      // Give this cell its own theme palette
      

      // Read color from that cell's theme
      const color = getComputedStyle(cell).getPropertyValue('--tertiary').trim();
      //console.log('Primary:', color); 
      //console.log(color);
      cell.style.border = `5px solid ${primary}`;
      if(img.color == ".theme-adventure")
      {
  
        cell.style.backgroundColor = "#FF8200";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #77AD78" class="button">${img.alt}</button><br>
        `;
        
      }
      if(img.color == ".theme-animation")
      {
  
        cell.style.backgroundColor = "#ffba08";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #A2AEBB" class="button">${img.alt}</button><br>
        `;
        
      }
      if(img.color == ".theme-comedy")
      {
  
        cell.style.backgroundColor = "#59CD90";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #3FA7D6" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-crime")
      {
  
        cell.style.backgroundColor = "#A6A2A2";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #CFD2CD" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-documentary")
      {
  
        cell.style.backgroundColor = "#768948";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #4CAF50" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-drama")
      {
  
        cell.style.backgroundColor = "#7698B3";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #726E97" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-family")
      {
  
        cell.style.backgroundColor = "#489FB5";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #82C0CC" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-fantasy")
      {
  
        cell.style.backgroundColor = "#5BC3EB";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #82C0CC" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-history")
      {
  
        cell.style.backgroundColor = "#DBAD6A";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #DFD5A5" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-horror")
      {
  
        cell.style.backgroundColor = "#DB324D";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #56494E" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-music")
      {
  
        cell.style.backgroundColor = "#FBDCE2";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #0ACDFF" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-mystery")
      {
  
        cell.style.backgroundColor = "#161A23";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #222B34" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-romance")
      {
  
        cell.style.backgroundColor = "#F4978E";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #F8AD9D" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-sciencefiction")
      {
  
        cell.style.backgroundColor = "#3DCCC7";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #68D8D6" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-thriller")
      {
  
        cell.style.backgroundColor = "#003553";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #006494" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-tvmovie")
      {
  
        cell.style.backgroundColor = "#093A3E";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #3AAFB9" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-war")
      {
  
        cell.style.backgroundColor = "#9FA4A9";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #AFBFC0" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-western")
      {
  
        cell.style.backgroundColor = "#FFB238";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #4CAF50" class="button">${img.alt}</button><br>
        `;
      }
      if(img.color == ".theme-action")
      {
  
        cell.style.backgroundColor = "#FF8200";
        cell.innerHTML = `
          <img src="${img.src}" alt="${img.alt}">
          <br>
          <button style = "background-color: #4CAF50" class="button">${img.alt}</button><br>
        `;
      }
      return cell;
    }

  </script>
</body>
</html>
